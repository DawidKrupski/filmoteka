var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},a=e.parcelRequired7c6;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in n){var a=n[e];delete n[e];var r={id:e,exports:{}};return t[e]=r,a.call(r.exports,r,r.exports),r.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){n[e]=t},e.parcelRequired7c6=a);var r=a("k3DwN"),o=a("2shzp");const s=document.querySelector(".loader"),i=async(e="https://api.themoviedb.org/3/movie/popular",t=1)=>{s.style.display="block";try{const n=await o.default.get(e,{params:{api_key:"b942b8bf626a04f48b07153a95ee51a0",page:t,language:"en-US"}});return s.style.display="none",n}catch(e){s.style.display="none",console.log(e)}};var c=a("4bJs7");let d="";const l=e=>{const t=L();return((e,t)=>{d="",e.map((n=>{t.map((t=>{t.id===n&&(n!=e[e.length-1]?d=d+t.name+", ":d+=t.name)}))}))})(e.genre_ids,t.data.genres),`\n<div class="movie-card">\n<img class="movie-card__image" alt="${e.title} movie" src=${(0,c.imageExists)("https://image.tmdb.org/t/p/w500",e.poster_path)}>\n  <div class="movie-card__label">\n    <p class="movie-card__title">${e.title}</p>\n    <p class="movie-card__genre-year">${d} | ${(0,c.getMovieYear)(e.release_date)}</p> \n    <p class="movie-card__id">${e.id}</p> \n  </div>\n</div>\n`};var u=a("2nhTy"),p=a("hkaSy");const m=document.querySelector(".main-box");let g,v,y,h=1;const f=async(e,t=1)=>{try{h=t;let n=await i(e,h);y=await(0,r.getGenresList)(),m.innerHTML="",n.data.results.map((e=>{m.insertAdjacentHTML("beforeend",l(e))})),n.data.total_pages<500?u.getPaginationNumbers(n.data.total_pages):u.getPaginationNumbers(500),u.setCurrentPage(h),v=async()=>{u.setCurrentPage(h-1),n=await i(e,--h),m.innerHTML="",n.data.results.map((e=>{m.insertAdjacentHTML("beforeend",l(e))})),(0,p.onTopScroll)()},u.prevButton.addEventListener("click",v),g=async()=>{u.setCurrentPage(h+1),n=await i(e,++h),m.innerHTML="",n.data.results.map((e=>{m.insertAdjacentHTML("beforeend",l(e))})),(0,p.onTopScroll)()},u.nextButton.addEventListener("click",g),document.querySelectorAll(".pagination__number").forEach((t=>{const a=Number(t.getAttribute("page-index"));a&&t.addEventListener("click",(async()=>{u.setCurrentPage(a),h=a,n=await i(e,h),m.innerHTML="",n.data.results.map((e=>{m.insertAdjacentHTML("beforeend",l(e))})),(0,p.onTopScroll)()}))}))}catch(e){console.log("err ",e)}},b=()=>{u.nextButton.removeEventListener("click",g),u.prevButton.removeEventListener("click",v)},L=()=>y;r=a("k3DwN");const _=document.querySelector(".genres-menu__select"),T=document.querySelector(".genres-menu__clear");let E="https://api.themoviedb.org/3/movie/popular",k=[],w=1;T.addEventListener("click",(e=>{k.forEach((e=>document.getElementById(e).classList.remove("focused-genre"))),k=[],E="https://api.themoviedb.org/3/movie/popular",b(),f(E)})),(0,r.getGenresList)().then((e=>{for(let t=0;t<e.data.genres.length;t++){const n=document.createElement("button");n.classList.add("genre"),n.id=e.data.genres[t].id,n.innerText=e.data.genres[t].name,n.addEventListener("click",(()=>{n.classList.add("focused-genre"),0===k?k.push(e.data.genres[t].id):k.includes(e.data.genres[t].id)?k.forEach(((a,r)=>{a==e.data.genres[t].id&&(k.splice(r,1),n.classList.remove("focused-genre"))})):k.push(e.data.genres[t].id),k!==[]?(w=1,E="https://api.themoviedb.org/3/discover/movie?&with_genres="+encodeURI(k.join(","))):E="https://api.themoviedb.org/3/movie/popular",b(),f(E,w)})),_.append(n)}})),a("4VpTM"),a("1wewW");o=a("2shzp");const S=document.querySelector(".loader");async function M(e,t=1){S.style.display="block";try{const n=await o.default.get("https://api.themoviedb.org/3/search/movie",{params:{api_key:"b942b8bf626a04f48b07153a95ee51a0",query:`${e}`,page:t}});return S.style.display="none",n.data}catch(e){S.style.display="none",console.error(e)}}var H=a("eWCmQ");u=a("2nhTy"),p=a("hkaSy");const q=document.querySelector(".header__no-movies"),x=document.querySelector(".main-box"),A=document.querySelector("input[name='searchQuery']"),C=document.querySelector(".header__search-form-btn");let N=1;C.addEventListener("click",(async function(e){e.preventDefault(),q.innerHTML="",N=1;const t=A.value;if(t){let e=await M(t,N);e.results.length?(x.innerHTML="",e.results.map((e=>{x.insertAdjacentHTML("beforeend",l(e))})),e.total_pages<500?u.getPaginationNumbers(e.total_pages):u.getPaginationNumbers(500),u.setCurrentPage(N),u.prevButton.addEventListener("click",(async()=>{u.setCurrentPage(N-1),e=await M(t,--N),x.innerHTML="",console.log(e),e.results.map((e=>{x.insertAdjacentHTML("beforeend",l(e))})),(0,p.onTopScroll)()})),u.nextButton.addEventListener("click",(async()=>{u.setCurrentPage(N+1),e=await M(t,++N),x.innerHTML="",console.log(e),e.results.map((e=>{x.insertAdjacentHTML("beforeend",l(e))})),(0,p.onTopScroll)()})),document.querySelectorAll(".pagination__number").forEach((n=>{const a=Number(n.getAttribute("page-index"));a&&n.addEventListener("click",(async()=>{u.setCurrentPage(a),N=a,e=await M(t,N),x.innerHTML="",console.log(e),e.results.map((e=>{x.insertAdjacentHTML("beforeend",l(e))})),(0,p.onTopScroll)()}))}))):q.innerHTML="Search result not successful. Enter the correct movie name."}else H.Notify.info("Enter movie title")})),a("hkaSy");const P=document.querySelector(".footer__authors"),j=document.querySelector(".students-modal__close-btn"),B=document.querySelector(".data-modal"),$=()=>{B.classList.add("is-hidden"),removeEventListener("keydown",D),removeEventListener("click",U)},D=e=>{27===e.keyCode&&$()},U=e=>{e.target.classList.contains("is-hidden")||e.target.closest(".students-modal")||"footer__authors"===e.target.className||$()};P.addEventListener("click",(()=>{B.classList.remove("is-hidden"),addEventListener("keydown",D),addEventListener("click",U)})),j.addEventListener("click",$),a("2ix2C"),f();
//# sourceMappingURL=index.d7c97119.js.map
